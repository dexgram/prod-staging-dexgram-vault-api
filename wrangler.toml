name = "prod-staging-dexgram-vault-api"
main = "src/index.ts"
compatibility_date = "2025-01-01"

[[d1_databases]]
binding = "DB"
database_name = "prod-dexgram-vault-db"
database_id = "e404af52-9444-49ae-8456-4a7014aa570a"

[vars]
TOKEN_TTL_SECONDS = "86400"
URL_TTL_SECONDS = "300"
MAX_UPLOAD_BYTES = "5368709120"
RATE_LIMIT_MAX_REQUESTS = "60"
RATE_LIMIT_WINDOW_MS = "60000"
# BUCKET_CONFIGS_JSON and SESSION_SECRET should be set via `wrangler secret put` or GitHub Actions.

[env.prod]
name = "prod-dexgram-vaultdb-api"
workers_dev = false
routes = [
  { pattern = "prod-vaultdb.dexgram.app/*", zone_name = "dexgram.app" }
]

[[env.prod.d1_databases]]
binding = "DB"
database_name = "prod-dexgram-vault-db"
database_id = "e404af52-9444-49ae-8456-4a7014aa570a"

[env.prod.vars]
TOKEN_TTL_SECONDS = "86400"
URL_TTL_SECONDS = "300"
MAX_UPLOAD_BYTES = "5368709120"
RATE_LIMIT_MAX_REQUESTS = "60"
RATE_LIMIT_WINDOW_MS = "60000"
